<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>PostGres数据库导入导出 · 我的程序世界</title><meta name="description" content="PostGres数据库导入导出 - Qiang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><!-- fonts--><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="http://fonts.lug.ustc.edu.cn/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><input type="checkbox" id="sidebar-toggle"><aside><div class="author"><a href="/."><img src="/img/author.png" class="author-img"></a><h2 class="author-name">Qiang</h2></div><div class="post-toc"><span class="toc-title">Directory</span><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#数据导出，备份"><span class="toc-text">数据导出，备份</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据导入，数据恢复"><span class="toc-text">数据导入，数据恢复</span></a></li></ol></div></aside><div class="main"><header><div id="top"><a href="/." class="logo-link">我的程序世界</a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">关于</a></li><li class="nav-list-item"><a href="/search.html" target="_self" class="nav-list-link">搜索</a></li></ul></div></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">PostGres数据库导入导出</h1><div class="post-time">Jan 13, 2015</div><div class="post-content"><h2 id="数据导出，备份"><a href="#数据导出，备份" class="headerlink" title="数据导出，备份"></a>数据导出，备份</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;[node@gpmather ~]$ pg_dump -f clickworld.sql -i  -C -E UTF8 -n public  -U admin -h 192.168.1.87 -W clinkworld</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;&#20551;&#35774;&#25105;&#22312;192.168.1.87 &#19978;&#26377;&#19968;&#20010;&#21517;&#20026; clinkworld&#30340;&#25968;&#25454;&#24211;&#65292;&#24819;&#25226;&#23427;&#22791;&#20221;&#21040;&#35013;&#26377;pg_dump&#26381;&#21153;&#30340;&#20219;&#20309;&#20027;&#26426;&#19978;&#65292;&#25105;&#22312;&#36825;&#20010;&#35013;&#26377;pg_dump&#26381;&#21153;&#30340;&#20027;&#26426;&#25110;&#32773;&#23458;&#25143;&#31471;&#65292;&#36816;&#34892;&#20197;&#19978;&#20195;&#30721;&#10;&#10;[code lang=&#34;sql&#34;]&#10;&#10;&#19968;&#33324;&#36873;&#39033;:&#10;&#10;  -f, --file=FILENAME          &#36755;&#20986;&#25991;&#20214;&#25110;&#30446;&#24405;&#21517;&#10;&#10;  -F, --format=c|d|t|p         &#36755;&#20986;&#25991;&#20214;&#26684;&#24335; (&#23450;&#21046;, &#30446;&#24405;, tar)&#10;&#10;                               &#26126;&#25991; (&#40664;&#35748;&#20540;))&#10;&#10;  -v, --verbose                &#35814;&#32454;&#27169;&#24335;&#10;&#10;  -V, --version                &#36755;&#20986;&#29256;&#26412;&#20449;&#24687;&#65292;&#28982;&#21518;&#36864;&#20986;&#10;&#10;  -Z, --compress=0-9           &#34987;&#21387;&#32553;&#26684;&#24335;&#30340;&#21387;&#32553;&#32423;&#21035;&#10;&#10;  --lock-wait-timeout=TIMEOUT  &#22312;&#31561;&#24453;&#34920;&#38145;&#36229;&#26102;&#21518;&#25805;&#20316;&#22833;&#36133;&#10;&#10;  -?, --help                   &#26174;&#31034;&#27492;&#24110;&#21161;, &#28982;&#21518;&#36864;&#20986;&#10;&#10;&#25511;&#21046;&#36755;&#20986;&#20869;&#23481;&#36873;&#39033;:&#10;&#10;  -a, --data-only              &#21482;&#36716;&#20648;&#25968;&#25454;,&#19981;&#21253;&#25324;&#27169;&#24335;&#10;&#10;  -b, --blobs                  &#22312;&#36716;&#20648;&#20013;&#21253;&#25324;&#22823;&#23545;&#35937;&#10;&#10;  -c, --clean                  &#22312;&#37325;&#26032;&#21019;&#24314;&#20043;&#21069;&#65292;&#20808;&#28165;&#38500;&#65288;&#21024;&#38500;&#65289;&#25968;&#25454;&#24211;&#23545;&#35937;&#10;&#10;  -C, --create                 &#22312;&#36716;&#20648;&#20013;&#21253;&#25324;&#21629;&#20196;,&#20197;&#20415;&#21019;&#24314;&#25968;&#25454;&#24211;&#10;&#10;  -E, --encoding=ENCODING      &#36716;&#20648;&#20197;ENCODING&#24418;&#24335;&#32534;&#30721;&#30340;&#25968;&#25454;&#10;&#10;  -n, --schema=SCHEMA          &#21482;&#36716;&#20648;&#25351;&#23450;&#21517;&#31216;&#30340;&#27169;&#24335;&#10;&#10;  -N, --exclude-schema=SCHEMA  &#19981;&#36716;&#20648;&#24050;&#21629;&#21517;&#30340;&#27169;&#24335;&#10;&#10;  -o, --oids                   &#22312;&#36716;&#20648;&#20013;&#21253;&#25324; OID&#10;&#10;  -O, --no-owner               &#22312;&#26126;&#25991;&#26684;&#24335;&#20013;, &#24573;&#30053;&#24674;&#22797;&#23545;&#35937;&#25152;&#23646;&#32773;&#10;&#10;  -s, --schema-only            &#21482;&#36716;&#20648;&#27169;&#24335;, &#19981;&#21253;&#25324;&#25968;&#25454;    &#21482;&#23548;&#20986;&#25968;&#25454;&#24211;&#32467;&#26500;&#10;&#10;  -S, --superuser=NAME         &#22312;&#26126;&#25991;&#26684;&#24335;&#20013;&#20351;&#29992;&#25351;&#23450;&#30340;&#36229;&#32423;&#29992;&#25143;&#21517;&#10;&#10;  -t, --table=TABLE            &#21482;&#36716;&#20648;&#25351;&#23450;&#21517;&#31216;&#30340;&#34920;&#10;&#10;  -T, --exclude-table=TABLE    &#19981;&#36716;&#20648;&#25351;&#23450;&#21517;&#31216;&#30340;&#34920;&#10;&#10;  -x, --no-privileges          &#19981;&#35201;&#36716;&#20648;&#26435;&#38480; (grant/revoke)&#10;&#10;  --binary-upgrade             &#21482;&#33021;&#30001;&#21319;&#32423;&#24037;&#20855;&#20351;&#29992;&#10;&#10;  --column-inserts             &#20197;&#24102;&#26377;&#21015;&#21517;&#30340;INSERT&#21629;&#20196;&#24418;&#24335;&#36716;&#20648;&#25968;&#25454;&#10;&#10;  --disable-dollar-quoting     &#21462;&#28040;&#32654;&#20803; (&#31526;&#21495;) &#24341;&#21495;, &#20351;&#29992; SQL &#26631;&#20934;&#24341;&#21495;&#10;&#10;  --disable-triggers           &#22312;&#21482;&#24674;&#22797;&#25968;&#25454;&#30340;&#36807;&#31243;&#20013;&#31105;&#29992;&#35302;&#21457;&#22120;&#10;&#10;  --exclude-table-data=TABLE   &#19981;&#36716;&#20648;&#25351;&#23450;&#21517;&#31216;&#30340;&#34920;&#20013;&#30340;&#25968;&#25454;&#10;&#10;  --inserts                    &#20197;INSERT&#21629;&#20196;&#65292;&#32780;&#19981;&#26159;COPY&#21629;&#20196;&#30340;&#24418;&#24335;&#36716;&#20648;&#25968;&#25454;&#10;&#10;  --no-security-labels         &#19981;&#36716;&#20648;&#23433;&#20840;&#26631;&#31614;&#30340;&#20998;&#37197;&#10;&#10;  --no-tablespaces             &#19981;&#36716;&#20648;&#34920;&#31354;&#38388;&#20998;&#37197;&#20449;&#24687;&#10;&#10;  --no-unlogged-table-data     &#19981;&#36716;&#20648;&#27809;&#26377;&#26085;&#24535;&#30340;&#34920;&#25968;&#25454;&#10;&#10;  --quote-all-identifiers      &#25152;&#26377;&#26631;&#35782;&#31526;&#21152;&#24341;&#21495;&#65292;&#21363;&#20351;&#19981;&#26159;&#20851;&#38190;&#23383;&#10;&#10;  --section=SECTION            &#22791;&#20221;&#21629;&#21517;&#30340;&#33410; (&#25968;&#25454;&#21069;, &#25968;&#25454;, &#21450; &#25968;&#25454;&#21518;)&#10;&#10;  --serializable-deferrable   &#31561;&#21040;&#22791;&#20221;&#21487;&#20197;&#26080;&#24322;&#24120;&#36816;&#34892;&#10;&#10;  --use-set-session-authorization&#10;&#10;                               &#20351;&#29992; SESSION AUTHORIZATION &#21629;&#20196;&#20195;&#26367;&#10;&#10;                ALTER OWNER &#21629;&#20196;&#26469;&#35774;&#32622;&#25152;&#26377;&#26435;&#10;&#10;&#32852;&#25509;&#36873;&#39033;:&#10;&#10;  -h, --host=&#20027;&#26426;&#21517;        &#25968;&#25454;&#24211;&#26381;&#21153;&#22120;&#30340;&#20027;&#26426;&#21517;&#25110;&#22871;&#25509;&#23383;&#30446;&#24405;&#10;&#10;  -p, --port=&#31471;&#21475;&#21495;        &#25968;&#25454;&#24211;&#26381;&#21153;&#22120;&#30340;&#31471;&#21475;&#21495;&#10;&#10;  -U, --username=&#21517;&#23383;      &#20197;&#25351;&#23450;&#30340;&#25968;&#25454;&#24211;&#29992;&#25143;&#32852;&#25509;&#10;&#10;  -w, --no-password        &#27704;&#36828;&#19981;&#25552;&#31034;&#36755;&#20837;&#21475;&#20196;&#10;&#10;  -W, --password           &#24378;&#21046;&#21475;&#20196;&#25552;&#31034; (&#33258;&#21160;)&#10;&#10;  --role=ROLENAME          &#22312;&#36716;&#20648;&#21069;&#36816;&#34892;SET ROLE</span><br></pre></td></tr></table></figure>
<h2 id="数据导入，数据恢复"><a href="#数据导入，数据恢复" class="headerlink" title="数据导入，数据恢复"></a>数据导入，数据恢复</h2><p><code>[node@gpmather ~]$  psql -f clickworld.sql -h 192.168.1.108 -U admin -W clinkworld</code></p>
<p>我把本地的 clickworld.sql 这个文件中的数据恢复到192.168.1.108 这台主机，并且创建表，但是在192.168.1.108 上 clinkworld 是先要创建好的。</p>
<p>附：</p>
<p>   最后一个参数，是数据库名称了</p>
<ol>
<li><p>只导出所有对象的数据库结构</p>
<p>C:>pg_dump -f backup.sql -i  -C -E UTF8 -n public -s  -U admin -h localhost -W clinkworld</p>
</li>
<li><p>导出所有对象的数据库结构和数据</p>
<p>C:>pg_dump -f backup.sql -i  -C -E UTF8 -n public  -U admin -h localhost -W clinkworld</p>
<p>没有-s参数</p>
</li>
<li><p>只导出所有的表数据</p>
<p>C:>pg_dump -f backup.sql -i -a -C -E UTF8 -n public  -U admin -h localhost -W clinkworld</p>
<p>-a 只导出数据</p>
</li>
</ol>
</div></article></div><div class="tags"><a href="/tags/PostGreSQL/">PostGreSQL</a></div><div class="paginator"><a href="/2015/01/24/2015-02-25-字符编码简介/" class="prev"><i class="fa fa-chevron-left"></i><span> 上一页</span></a><a href="/2015/01/04/2014-12-11-Postgres 序列操作/" class="next"><span>下一页</span><i class="fa fa-chevron-right"></i></a></div></section><footer><section id="comments"><div data-thread-key="http://febsky.me/2015/01/13/2015-01-13-PostGres数据库导入导出/index.html" data-title="PostGres数据库导入导出" data-url="http://febsky.me/2015/01/13/2015-01-13-PostGres数据库导入导出/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "febsky" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section><div class="copyright"><p>© 2016<span class="heart"><i class="icon-next-heart fa fa-heart"></i></span><a href="http://febsky.me">Qiang</a></p></div></footer></div><label for="sidebar-toggle" class="sidebar-menu"><i class="fa fa-bars"></i></label><label class="back2top"> <a href="#top"><i class="fa fa-chevron-up"></i></a></label></body></html>